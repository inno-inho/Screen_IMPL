<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>

        // 클로저
        // 클로저는 내부 함수가 외부 함수에 접근할 수 있는 방법을 의미한다
        // 정보 은닉 : 클로저를 사용하여 외부에서 접근 할 수 없도록 변수를 보호하고,
        // 함수를 통해서만 접근 가능하도록 제한 할 수 있다

        // 데이터 보존 : 클로저를 사용하여 함수가 생성될 당시의 환경을 유지하면서,
        // 함수내에서 데이터를 영구적으로 보존할 수 있다
        // 비동기 처리: 클로저를 사용하여 비동기적인 작업에서 결과를 유지하고,
        // 필요할 때에 접근할 수 있다

        // 외부 함수

        function outer(){
            // 상태값 보관
            let state = 0;
            // 내부 함수
            function addOne(){
                state++;
                console.log('state..', state);  // 렉시컬 스코프 작용
                console.dir(addOne);
            }
            return addOne;  // 함수이름이 리턴되면 만들어진 함수의 위치정보(함수의 메모리주소)가 반환
        
        }

        const closureFunc = outer();    // outer()은 addOne이 반환됌
        console.log('clousureFunc: ', closureFunc);
        closureFunc();



        // 02

        // 전역 스코프
        var x = 'global x'  // 전역스코프
        var n1 = 10;    // 전역스코프
        console.log("window",window.x);

        // outer 함수 지역 스코프
        function outer() {
            var x = 'outer x'
            var y = 0;

            // inner 함수 지역 스코프
            function inner() {
                var x = 'inner x'   // inner의 x를 사용함

                // if 블록 지역 스코프
                if (x) {
                    const x = 'if block scope'
                    console.log(x) // if block scope
                    y++;
                    console.log('y',y) // outer y
                    n1++;   // 전역변수 n1 -> 10
                    console.log('n1',n1) // window n1
                    // console.log(z) // Uncaught ReferenceError: z is not defined
                }
                console.dir(inner);
            }

           return inner;
        }

        const clousureFunc2=outer()
        clousureFunc2();
        clousureFunc2();
        clousureFunc2();
        clousureFunc2();
        clousureFunc2();




    </script>


</body>
</html>